generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model SurveyResponse {
  id            Int      @id @default(autoincrement())
  firstName     String   @db.VarChar(100)
  lastName      String   @db.VarChar(100)
  email         String   @unique @db.VarChar(255)
  contactNumber String   @db.VarChar(20)
  dateOfBirth   DateTime @db.Date
  foods         String   @db.VarChar(255) // TODO: Normalize in next migration (see MIGRATION_PLAN.md)
  ratingMovies  Int      @db.SmallInt
  ratingRadio   Int      @db.SmallInt
  ratingEatOut  Int      @db.SmallInt
  ratingTV      Int      @db.SmallInt
  submittedAt   DateTime @default(now()) @db.Timestamp(6)

  // Indexes for performance optimization
  @@index([email], name: "idx_survey_email")
  @@index([dateOfBirth], name: "idx_survey_dob")
  @@index([submittedAt], name: "idx_survey_submitted")
  @@index([submittedAt, id], name: "idx_survey_submitted_id")
}
